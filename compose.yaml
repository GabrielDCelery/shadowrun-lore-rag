services:
  shadowrun-rag:
    build: .
    container_name: shadowrun-rag
    environment:
      - OLLAMA_HOST=http://host.docker.internal:11434
      - DATA_PATH=/data
      - LLM_MODEL=llama3.2
    volumes:
      - /srv/shadowrun-rag/pdfs:/data/pdfs:ro
      - /srv/shadowrun-rag/extracted:/data/extracted
      - /srv/shadowrun-rag/chroma_db:/data/chroma_db
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # No ports needed - CLI only
    # Override command to keep running for manual exec
    command: tail -f /dev/null
    restart: unless-stopped
